(function(){var e,t;e=function(){function e(){}return e.enable=function(t){var n,r,o;if(o=Profile.getByName(t),0!==o.length){o=o[0];try{if(Logging.info("Enable Proxy: `"+o.name+"`, "+o.type),"auto"===o.type)e.enableProxyAuto(o);else if("manual"===o.type)e.enableProxyManual(o);else{if("system"!==o.type)return void e.setIcon("off");e.enableProxySystem(o)}return"https"===o.scheme?(e.setIcon("on_sec"),e.setConnStat(t)):(e.setIcon("on"),e.setConnStat(t))}catch(r){return n=r,Logging.error(n),e.setIcon("off")}}},e.getGlobalSettings=function(){var e;return e=localStorage.getItem("Settings"),e&&(e=JSON.parse(e)),e||(e={}),e},e.enableProxyManual=function(e){var t,n,r;return r=this.getGlobalSettings(),t=e.bypass||[],r.bypass&&(t=t.concat(r.bypass.split(","))),r.ignoreBypass&&(t=[]),e.use_auth&&chrome.runtime.sendMessage({msg:"set_auth",profile:e},function(){}),n={mode:"fixed_servers",rules:{singleProxy:{scheme:e.scheme,host:e.host,port:parseInt(e.port)},bypassList:t}},chrome.proxy.settings.set({value:n,scope:"regular"},function(){return e.use_auth?app.fakeHTTPAuth(e):void 0})},e.enableProxyAuto=function(e){var t;return t=function(e){var t;return t={mode:"pac_script",pacScript:{url:e}},chrome.proxy.settings.set({value:t,scope:"regular"},function(){})},$.ajax({url:e.pac_url,cache:!1}).done(function(n,r,o){return t(e.pac_url)}).fail(function(n,r,o){return t(e.pac_url)})},e.enableProxySystem=function(){var t;return t={mode:"system"},chrome.proxy.settings.set({value:t,scope:"regular"},function(){return e.setIcon("off_alt")})},e.disable=function(){var t;return t={mode:"direct"},chrome.proxy.settings.set({value:t,scope:"regular"},function(){return e.setIcon("off")})},e.setIcon=function(e){chrome.runtime.sendMessage({msg:"set_icon",name:e},function(){})},e.setConnStat=function(e){chrome.runtime.sendMessage({msg:"set_conn_stat",name:e},function(){})},e}(),t="undefined"!=typeof exports&&null!==exports?exports:this,t.Agent=e}).call(this);